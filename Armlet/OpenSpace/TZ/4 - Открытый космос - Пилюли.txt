Открытый космос - Пилюли
Список игровых объектов с пилюлями
Лекарства
Замекс
Астакс 
Каппалон 
Диакард 
Ворсалин
Ливовит
Новое лекарство от Вируса-Х
транквилизатор
Наркотики
Нирвана
Профессиональный 
Боевой стимулятор
Гели
нано-гель
бакто-гель
лито-гель
батарейка
Технические
кислородный баллон
внешний сенсор обшивки модуля
"батарейка"

Лекарства.
Пилюля действует сразу, как только её подключили.
Проверка на операцию в автодоке (запросить сервер). Если идет операция - вывод на экран браслета сообщения "Невозможно совершить инъекцию - блокировка автодока"
Если операция не идет/нет ответа от сервера - следущий шаг.
Проверка зарядов
Если = 0, то вывод на экран браслета сообщение "Инъекция не возможна. Контейнер пуст" + кнопку "ок".
Если зарядов > 0, то следующий шаг
Проверка id игрока на уникальные реакции/ход болезни (список) - выбор варианта эффектов.
Проверка на действие текущих лекарств и применение эффекта. 
Если таймера доз нет - стартуем таймер Доза 1 (90 минут), и применяем эффект Дозы 1 данной пилюли (изменяем параметры, проверяем список подходящих лекарству фаз болезней, делаем конец болезни подходящим, добавляем симптомы)
Если таймер есть - проверяем, нет ли "блокаторов". Если нет - тратим заряд пилюли, добавляем к таймеру 90 минут, добавляем 1 к счетчику Доза, применяем эффекты текущей Дозы для этого лекарства. Если блокатор есть - всё тоже самое, но эффект лечения не применился.
Выводим на экран браслета "Инъекция сделана. Осталось Х доз.  Сделать еще одну?" Варианты "да, еще одну пожалуйста"/"нет, отсоединяю инъектор".
Если "да" - к пункту 1.
Если "нет" - ничего не делаем.

Гели, Наркотики
Пилюля, подключенная к браслету игрока, действует сразу, как только её подключили.
Проверка на операцию в автодоке (запросить сервер). Если идет операция - вывод на экран браслета сообщения "Невозможно совершить инъекцию - блокировка автодока"
Если операция не идет/нет ответа от сервера - следующий шаг.
Проверка зарядов
Если = 0, то вывод на экран браслета сообщение "Инъекция не возможна. Контейнер пуст" + кнопку "ок".
Если зарядов > 0, то следующий шаг
Проверка на id браслета. Если это это гейт - действует по основной модели.
Если id игрока -  проверка id на уникальные реакции/ход болезни (список) - выбор варианта эффектов.
Стартуем болезнь геля/наркотиков. 
Выводим на экран браслета сообщение "Инъекция сделана. Осталось Х доз.  Сделать еще одну?" Варианты "да, еще одну пожалуйста"/"нет, отсоединяю инъектор".
Если "да" - к пункту 1.
Если "нет" - ничего не делаем. 
Добавляем в список состояние здоровья новое состояние, если есть

При подключении геля к гейту/браслету оборудования (отдельные id) - отправляем на сервер
id браслета
id пилюли
кол-во зарядов. 
Сервер может прислать команду на уменьшение зарядов. 

Технические 
Кислородный баллон - съемная часть скафандра (4 штуки). При подключении к браслету в разделе Hard&Soft (https://basecamp.com/1947146/projects/2807930/documents/3336351) отображается утилита "Учет кислорода в скафандре", браслет отправляет на сервер локацию игрока = "космос", сама утилита выводит % оставшегося кислорода на экран. 
Расчет: в пилюле 100 зарядов. Каждый заряд = 1% кислорода = 9 секунд таймера. 
При остатке = 10% - включаем вибро, пищалку и отображаем на браслете таймер обратного отсчета в секундах, до 0. Когда таймер доходит до 0 - выводим на браслет мигающую надпись "Кислородный баллон пуст! Немедленно замените его или откройте скафандр!" Через 60 секунд вызываем  в медицине состояние "труп".

Сенсор обшивки модуля - находится в отсеке (всего 12 штук). При подключении к браслету проверяет, разблокирована ли утилита "Инженерный канал" (раздел браслета Hard&Soft https://basecamp.com/1947146/projects/2807930/documents/3336351)
Если да - браслет отправляет на сервер команду "прозвон" и выводит полученные данные на экран. Повторное подключение к другой пилюле этого же типа выводит на экран сообщение ошибки "Данные уже загружены. Необходимо обновление состояния на терминале инженерной части".
После команды сервера "считать собранные данные" удаляем данные с браслета, утилита готова к новому циклу.
Если нет - на экран браслета нужно выводить "оборудование не обладает необходимым программным приложением. обратитесь к администратору инженерной части". 



Discuss this document

Антон Страхов
Антон Страхов – вынесено в отдельный документ из модели медицины
Posted on Jul 6
Антон Страхов
Антон Страхов – у гелей надо видимо делать проверку на определенные id браслета - есть браслеты, которые не являются гейтами, но не закреплены за игроками - например лито-гель подключается к отдельным браслетам, задача которых только отправить заряд и тип пилюли на сервер
Posted on Jul 8
Kreyl Laurelindo
Kreyl Laurelindo – Нужно найти людей, которые сделают антуражную батарейку из пилюли. Это не я: ни антураж, ни поиск.
Posted on Jul 19
Антон Страхов
Антон Страхов – мы это сами все сделаем. нам только получить пилюли надо. там куча антуража
Posted on Jul 19